<!DOCTYPE html>
<html>
  <head>
    <title>Veres One DID Method 1.0</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script src="./common.js"></script>
    <script type="text/javascript" class="remove">
      var respecConfig = {
        // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
        specStatus: "CG-DRAFT",

        // the specification's short name, as in http://www.w3.org/TR/short-name/
        shortName: "didm-veres-one",

        // subtitle
        subtitle: "A decentralized identifier method for the Veres One Ledger",

        // if you wish the publication date to be other than today, set this
        // publishDate:  "2009-08-06",

        // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
        // and its maturity status
        // previousPublishDate:  "1977-03-15",
        // previousMaturity:  "WD",

        // extend the bibliography entries
        localBiblio: ccg.localBiblio,

        github: "https://github.com/w3c-ccg/didm-veres-one",
        includePermalinks: false,

        // if there a publicly available Editor's Draft, this is the link
        edDraftURI: "https://w3c-ccg.github.io/didm-veres-one/",

        // if this is a LCWD, uncomment and set the end of its review period
        // lcEnd: "2009-08-05",

        // editors, add as many as you like
        // only "name" is required
        editors: [
          { name: "Manu Sporny", url: "http://manu.sporny.org/",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/" },
          { name: "Dave Longley", url: "https://github.com/dlongley",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/"},
        ],

        // authors, add as many as you like.
        // This is optional, uncomment if you have authors as well as editors.
        // only "name" is required. Same format as editors.
        authors:
        [
          { name: "Manu Sporny", url: "http://manu.sporny.org/",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/" },
          { name: "Dave Longley", url: "https://github.com/dlongley",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/"}
        ],

        // name of the WG
        wg:           "Credentials Community Group",

        // URI of the public WG page
        wgURI:        "https://www.w3.org/community/credentials/",

        // name (with the @w3c.org) of the public mailing to which comments are due
        wgPublicList: "public-credentials",

        // URI of the patent status for this WG, for Rec-track documents
        // !!!! IMPORTANT !!!!
        // This is important for Rec-track documents, do not copy a patent URI from a random
        // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
        // Team Contact.
        wgPatentURI:  "https://www.w3.org/community/about/agreements/cla/",
        maxTocLevel: 4,
        inlineCSS: true
      };
    </script>
    <style>
pre .highlight {
  font-weight: bold;
  color: green;
}
pre .comment {
  font-weight: bold;
  color: Gray;
}
    </style>
  </head>
  <body>
    <section id='abstract'>
      <p>
The Veres One Ledger is a permissionless public ledger designed specifically
for the creation and management of
<a href="https://w3c-ccg.github.io/did-spec/">decentralized identifiers</a>
(DIDs).
Veres One DIDs are self-administered identifiers that may be used by people,
organizations, and digital devices to establish an identifier that is
under their control. Veres One DIDs are useful in ecosystems where one needs
to issue, store, and use
<a href="https://w3c.github.io/vc-data-model/">Verifiable Credentials</a>. This
specification defines how a developer may create and update DIDs in the Veres
One Ledger.
      </p>
    </section>

<section id='sotd'>
  <p>
Comments regarding this document are welcome. Please file issues
directly on <a href="https://github.com/w3c-ccg/didm-veres-one/issues/">GitHub</a>,
or send them to
<a href="mailto:public-credentials@w3.org">public-credentials@w3.org</a>
(<a href="mailto:public-credentials-request@w3.org?subject=subscribe">subscribe</a>,
<a href="https://lists.w3.org/Archives/Public/public-credentials/">archives</a>).
  </p>

  <p>
Work on this specification has been funded in part by the United States
Department of Homeland Security's Science and Technology Directorate under
contract HSHQDC-17-C-00019. The content of this specification
does not necessarily reflect the position or the policy of the U.S.
Government and no official endorsement should be inferred.
  </p>

  <p>
Work on this specification has also been supported by the Rebooting the
Web of Trust group facilitated by Christopher Allen, Shannon Appelcline,
Kiara Robles, Kaliya Young, Brian Weller, and Betty Dhamers.
  </p>

</section>

<section>
  <h1>Introduction</h1>

  <p>
The Veres One Project envisions a world where people and organizations
control their identifiers and their identity data. The Veres One
Blockchain is a fit-for-purpose blockchain optimized for identity on the
Web. The network ecosystem is designed to be self-sufficient through the
use of an innovative operational and funding model. The operational model
ensures openness, prevents attacks against the network, and financially
rewards individuals and organizations that choose to run software to
ensure the security of the network. Human dignity demands that every
individual be able to participate equally in our increasingly digital
society. That means everyone deserves the ability create and administer
unique, globally resolvable identifiers. For that reason, the network is
global and open to the public; anyone may participate.
  </p>


</section>

<section>
  <h1>Core Data Model</h1>

  <p class="issue">
TBD: This section will describe the use of the Web Ledger, JSON-LD, and the
DID spec to build the Veres One Ledger.
  </p>

</section>

<section>
  <h1>Basic Concepts</h1>

  <section>
    <h2>Authentication</h2>

    <p>
Authentication is the process the ledger uses to determine if an entity
is associated with a DID.
    </p>

    <pre class="example nohighlight" title="Expressing authentication credentials">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  <span class="highlight">"authenticationCredential": [... array of acceptable authentication credentials ...]</span>
}
    </pre>

    <p>
A detailed example of a valid set of authentication credentials follows:
    </p>

    <pre class="example nohighlight" title="Detailed example of authentication credentials entry">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  "authenticationCredential": [{
    "type": "RsaSignature2017",
    "publicKey": {
      "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938/keys/2",
      "type": "CryptographicKey",
      "owner": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
      "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n",
    }
  }]
}
    </pre>

  </section>

  <section>
    <h2>Authorization</h2>

    <p>
Authorization is the process the ledger uses to determine what an entity
may to do the DID Document.
    </p>

    <pre class="example nohighlight" title="">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  <span class="highlight">"authorizationCapability": [... array of capability descriptions ...]</span>
}
    </pre>

    <p>
A detailed example of a valid set of authorization capability descriptions
follows:
    </p>

    <pre class="example nohighlight" title="">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  // proof of update authorization may be provided by digital wallet + friend OR
  // by mobile phone
  "authorizationCapability": [{
    // this entity may update any field in this DID Document using any
    // authentication mechanism understood by the ledger
    "permission": "UpdateDidDocument",
    "entity": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938"
  }, {
    // this entity may update the authenticationCredential field in this
    // DID Document as long as they authenticate with RsaSignature2017
    "entity": "did:v1:b5f8c320-f7ca-4869-85e6-a1bcbf825b2a",
    "permission": "UpdateDidDocument",
    "field": ["authenticationCredential"],
    "permittedProofType": [{
      "proofType": "RsaSignature2017"
    }]
  }, {
    // anyone may update the authenticationCredential and writeAuthorization
    // fields as long as they provide a specific multi-signature proof
    "permission": "UpdateDidDocument",
    "field": ["authenticationCredential", "authorizationCapability"],
    "permittedProofType": [{
      "proofType": "RsaSignature2017",
      "minimumSignatures": 3,
      "authenticationCredential": [{
        "id": "did:v1:304ebc3e-7997-4bf4-a915-dd87e8455941/keys/123",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:304ebc3e-7997-4bf4-a915-dd87e8455941",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }, {
        "id": "did:v1:0f22346a-a360-4f3e-9b42-3366e348e941/keys/foo",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:0f22346a-a360-4f3e-9b42-3366e348e941",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }, {
        "id": "did:v1:a8d00377-e9f1-44df-a1b9-55072e13262a/keys/abc",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:a8d00377-e9f1-44df-a1b9-55072e13262a",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }]
    }]
}
    </pre>

  </section>

  <section>
    <h2>Service Descriptions</h2>


    <p>
Services may be listed by including them at the top-level of the DID Document.
    </p>

    <pre class="example nohighlight" title="Simple example of a service description">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
   <span class="highlight">"credentialRepositoryService": "https://wallet.veres.io/"</span>
}
    </pre>

    <p>
A detailed example of the expression of a service description follows:
    </p>

    <pre class="example nohighlight" title="">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  "credentialRepositoryService": [{
    // the verifiable credential repository service
    "id": "did:v1:5d6c3b20-56a9-42e1-bfc8-ed7e685c9039",
    "type": "VerifiableCredentialRepository",
    "url": "https://wallet.veres.io/",
    "description": "Pat Doe's Digital Wallet"
  }]
}
    </pre>

  </section>

</section>

<section>
  <h1>Operations</h1>

  <p>
Every conforming Veres Ledger node MUST expose at least the following HTTP
endpoints:
  </p>

  <table class="simple">
    <thead>
      <th>Service</th>
      <th>Example URL</th>
      <th>Description</th>
    </thead>
    <tbody>
      <tr>
        <td>veresOneCreateService</td>
        <td>POST /dids</td>
        <td>Create a new DID.</td>
      </tr>
      <tr>
        <td>veresOneReadService</td>
        <td>GET /dids/{did}</td>
        <td>Gets an existing DID Document.</td>
      </tr>
      <tr>
        <td>veresOneUpdateService</td>
        <td>POST /dids/{did}</td>
        <td>Update an existing DID Document.</td>
      </tr>
    </tbody>
  </table>

  <section>
    <h2>Discovering Service Endpoints</h2>

    <p>
A website may provide service endpoint discovery by embedding JSON-LD in their
top-most HTML web page (e.g. at <code>https://example.com/</code>):
    </p>

    <pre class="example highlight" title="Example of HTML-based service description">
&lt;!DOCTYPE html>
&lt;html lang="en">
  &lt;head>
    &lt;meta charset="utf-8">
    &lt;title>Example Website&lt;/title>
    &lt;link rel="stylesheet" href="style.css">
    &lt;script src="script.js">&lt;/script>
    &lt;script type="application/ld+json">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "https://example.com/",
  "name": "Example Website",
  "veresOneCreateService": "https://example.com/veres-one/dids",
  "veresOneReadService": "https://example.com/veres-one/dids/",
  "veresOneUpdateService": "https://example.com/veres-one/dids/"
}
    &lt;/script>
  &lt;/head>
  &lt;body>
    &lt;!-- page content -->
  &lt;/body>
&lt;/html>
    </pre>

    <p>
Service descriptions may also be requested via content negotiation.
In the following example a JSON-compatible service description is provided
(e.g. <code>curl -H "Accept: application/json" https://example.com/</code>):
    </p>

    <pre class="example highlight" title="Example of a JSON-based service description">
{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "https://example.com/",
  "name": "Example Website",
  "veresOneCreateService": "https://example.com/veres-one/dids",
  "veresOneReadService": "https://example.com/veres-one/dids/",
  "veresOneUpdateService": "https://example.com/veres-one/dids/"
}
    </pre>

  </section>

  <section>
    <h2>Creating a DID</h2>

    <p>
A DID is created by performing an HTTP POST of a signed DID Document
to the <code>veresOneCreateService</code>. The following HTTP status codes
are defined for this service:
    </p>

    <table class="simple">
      <thead>
        <th style="white-space: nowrap">HTTP Status</th>
        <th>Description</th>
      </thead>
      <tbody>
        <tr>
          <td>201</td>
          <td>
DID creation request was successful. The HTTP <code>Location</code> header will
contain the URL for the newly created DID Document.
          </td>
        </tr>
        <tr>
          <td>400</td>
          <td>DID creation request failed.</td>
        </tr>
        <tr>
          <td>409</td>
          <td>A duplicate DID exists.</td>
        </tr>
      </tbody>
    </table>

    <p>
An example exchange of DID creation request is shown below:
    </p>

    <pre class="example highlight" title="DID creation request">
POST /dids HTTP/1.1
Host: example.com
Content-Type: application/ld+json
Content-Length: 1062
Accept: application/ld+json, application/json, text/plain, */*
Accept-Encoding: gzip, deflate

{
  "@context": "https://w3id.org/webledger/v1",
  "type": "WebLedgerEvent",
  "operation": "Create",
  "input": [{
    "@context": "https://w3id.org/veres-one/v1",
    "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
    "authorizationCapability": [{
      "permission": "UpdateDidDocument",
      "entity": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "permittedProofType": [{
        "proofType": "LinkedDataSignature2015"
      }, {
        "proofType": "EquihashProof2017",
        "equihashParameterAlgorithm": "VeresOne2017"
      }]
    }],
    "authenticationCredential": [{
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmbDqPu6IKHiiIQ4d0AQ6\r\n
        PBduDhUUVqyQirvxqsdcNdKgZ2L8whBml/nTyuB4cd+hHrsfMDiHiT5kX2pbZ7Yy\r\n
        2ctWkGw8e0J94CbwVh2H15gBQBUCjLiGvVIHO2pni693qmre+3Ya2NJ8gGwPLJ7h\r\n
        TLca2b2dX0y16qu0MT0osUGGEoPsdg6ibD2pxnADS3GNPObHT12GrAuxjYFMHecF\r\n
        A4hLZ8U+MIcVmHZuokqqbcyJyjOV+kmhFNeTKFP5P5U8HA3Y42/rE1UJp/wyy7Lc\r\n
        ZAvq0t75ddXKyvYh5dkzxxeeELNKNWVxJ2yvgAr0SatLEPzxJoeYdCyU5N5E22Fj\r\n
        jQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }]
  }],
  "signature": [{
    "type": "EquihashProof2017",
    "equihashParameterN": 64,
    "equihashParameterK": 3,
    "nonce": "AQAAAA==",
    "proofValue": "AAAaPwABxrIAAFOKAAGo4QAAVW0AAN7cAACXcgABjEI="
  }, {
    "type": "LinkedDataSignature2015",
    "created": "2017-09-30T02:54:31Z",
    "creator": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
    "signatureValue": "SNMbsPqLnB+hJFhXzS6hcpZnm9cGvSZZg7o26UYnyGYTvKder/S+Xk
      hNhXisS5385Ljlf5CXTQT5j6qYZtP8ut1Benaae8TMH17txP0CfzHbUMJFnHA1+Nru+e/Pw
      yPwuQ+VZYlXOB7g/tKVVZsxAYTKCAOJvJMIE+nlHjpB+RsKs9z4ZzVtddntqqAcvbZxV/o7
      azBFDizeJu/gHVVMncCJ00SRoOzCOZUABRJV/k68bNSAfpELkrdWx8/xvMIF8r+LWhwdKCS
      iOw4DjSwIK40yD5rOvQn/GlC+unyB8zFe60jCToz/UOJNZBiIYwo+Pwwx28Wqd4Jkb3IeDr
      /L2Q=="
  }]
}
    </pre>

    <p>
If the creation of the DID was successful, an HTTP 201 status code is
expected in return:
    </p>

    <pre class="example highlight" title="Successful DID creation response">
HTTP/1.1 201 Created
Location: https://ledger.example.com/dids/did:v1:215cb1dc-1f44-4695-a07f-97649cad9938
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
Date: Fri, 14 Oct 2016 18:35:33 GMT
Connection: keep-alive
Transfer-Encoding: chunked
    </pre>

  </section>

  <section>
    <h2>Updating a DID Document</h2>

    <p>
A DID is updated by performing an HTTP POST of a signed DID Document
to the <code>veresOneUpdateService</code>. The following HTTP status codes
are defined for this service:
    </p>

    <table class="simple">
      <thead>
        <th style="white-space: nowrap">HTTP Status</th>
        <th>Description</th>
      </thead>
      <tbody>
        <tr>
          <td>200</td>
          <td>
DID update request was successful.
          </td>
        </tr>
        <tr>
          <td>400</td>
          <td>DID update request failed.</td>
        </tr>
      </tbody>
    </table>

    <p>
An example exchange for a DID update request is shown below:
    </p>

    <pre class="example highlight" title="DID Document update request">
POST /dids/did:v1:215cb1dc-1f44-4695-a07f-97649cad9938 HTTP/1.1
Host: example.com
Content-Type: application/ld+json
Content-Length: 1062
Accept: application/ld+json, application/json, text/plain, */*
Accept-Encoding: gzip, deflate

{
  "@context": "https://w3id.org/webledger/v1",
  "type": "WebLedgerEvent",
  "operation": "Update",
  "input": [{
    "@context": "https://w3id.org/veres-one/v1",
    "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
    "authorizationCapability": [{
      "permission": "UpdateDidDocument",
      "entity": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "permittedProofType": [{
        "proofType": "LinkedDataSignature2015"
      }, {
        "proofType": "EquihashProof2017",
        "equihashParameterAlgorithm": "VeresOne2017"
      }]
    }],
    "authenticationCredential": [{
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmbDqPu6IKHiiIQ4d0AQ6\r\n
        PBduDhUUVqyQirvxqsdcNdKgZ2L8whBml/nTyuB4cd+hHrsfMDiHiT5kX2pbZ7Yy\r\n
        2ctWkGw8e0J94CbwVh2H15gBQBUCjLiGvVIHO2pni693qmre+3Ya2NJ8gGwPLJ7h\r\n
        TLca2b2dX0y16qu0MT0osUGGEoPsdg6ibD2pxnADS3GNPObHT12GrAuxjYFMHecF\r\n
        A4hLZ8U+MIcVmHZuokqqbcyJyjOV+kmhFNeTKFP5P5U8HA3Y42/rE1UJp/wyy7Lc\r\n
        ZAvq0t75ddXKyvYh5dkzxxeeELNKNWVxJ2yvgAr0SatLEPzxJoeYdCyU5N5E22Fj\r\n
        jQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }, {
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/2",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIj0BAQEFAKHiiIQ4d0AQ6ANBgkqhkiG9wAOCAQ8AMIIBCgKCAQEAmbDqPu6I\r\n
        xqsdcNdKgZ2L8whBml/nTyuBiHiPBduDhUUVqyQirvT5kX2pbZ7Yy4cd+hHrsfMD\r\n
        VhVIHO2pni693qmre+2ctWkGw8e0J94Cbw3Ya2NJ8gGwPLJ7hH15gBQBUCjLiGv\r\n
        0osUNPObHT12GrAuxjYFMHecFGTLca2b2dX0y16qu0MTGEoPsdg6ibD2pxnADS3G\r\n
        kqqbcyJyjOV+kmh8HA3Y42/rE1UJpA4hLZ8U+MIcVmHZuo/wyy7LcFNeTKFP5P5U\r\n
        5dkzxxezxJoeYdCyU5N5E2ZAvq0t75ddXKyvYh2FjeELNKNWVxJ2yvgAr0SatLEP\r\n
        AQABjQID\r\n-----END PUBLIC KEY-----\r\n"
    }]
  }],
  "signature": [{
    "type": "EquihashProof2017",
    "equihashParameterN": 64,
    "equihashParameterK": 3,
    "nonce": "AQAAAA==",
    "proofValue": "AAAaPwABxrIAAFOKAAGo4QAAVW0AAN7cAACXcgABjEI="
  }, {
    "type": "LinkedDataSignature2015",
    "created": "2017-09-30T02:54:31Z",
    "creator": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/2",
    "signatureValue": "Zg7o26UYnyGYTvKdSN6hcpZnm9cGvSZB+hJFhXzSer/S+XkMbsPqLn
      VMncCJ00SRoOzCOZUABRJV/azBFDizeJu/gHVk68bNSAfpELkrdWx8/xvMIF8r+LWhwdKCS
      XTQT5j6qYZtP8ut1BenahNhXisS5385Ljlf5Cae8TMH17txP0CfzHbUMJFnHA1+Nru+e/Pw
      K40yD5rOvQn/GlC+unyB8ziOw4DjSwIFe60jCToz/UOJNZBiIYwo+Pwwx28Wqd4Jkb3IeDr
      VVZsxAYTKCAOJvJMIE+nlHjpB+RyPwuQ+VZYlXOB7g/tKsKs9z4ZzVtddntqqAcvbZxV/o7
      /45H=="
  }]
}
    </pre>

    <p>
If the update request for the DID was successful, an HTTP 200 status code is
expected in return:
    </p>

    <pre class="example highlight" title="Successful ledger creation response">
HTTP/1.1 200 Success
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
Date: Fri, 14 Oct 2016 18:35:33 GMT
Connection: keep-alive
Transfer-Encoding: chunked
    </pre>

  </section>

  <section>
    <h2>Delegating Control</h2>

    <p class="issue">
TBD: Explain that delegation of control is merely placing a digital wallet
provider in the proofOfControl field.
    </p>
  </section>

  <section>
    <h2>Key Rotation and Transferring Control</h2>

    <p class="issue">
TBD: Explain that transferring control and rotating keys is a matter of
adding and removing the appropriate keys from proofofControl and
proofOfUpdateAuthorization.
    </p>
  </section>

  <section>
    <h2>Recovering a DID</h2>

    <p class="issue">
TBD: Explain that recoverying a DID is a matter of meeting the requirements
under proofOfUpdateAuthorization.
    </p>
  </section>

</section>

<section>
  <h1>Appendix A: Examples</h2>

  <section>
    <h2>Typical DID Document</h2>

    <p>
The following is a complete example of a typical Veres One DID Document:
    </p>

    <pre class="example nohighlight">
{
  "@context":"https://w3id.org/veres-one/v1",
  "id":"did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ",
  "authentication": [{
    "type":"RsaSignatureAuthentication2018",
    "publicKey": {
      "id":"did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ#authn-key-1",
      "type":"RsaVerificationKey2018",
      "owner":"did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ",
      "publicKeyPem":"-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAv69zWOjGaVnOhvD9vGb2\r\n
        pMev9tLmLc+ivPvkooUGj9iY76oPlX4JD1mcSaTql9kXDeY4sjElTTO4TAcJr3Vt\r\n
        BLEKo5WhsrGNYY30mWVepAZRJ0iRgVcy73/wB7nyqD+e7Uh5V845dHohLQoFJfxr\r\n
        DTyW0X6447YI1xuuPU5kTgfS16b/PFClS7hCWW/Ih0rCSQ8o1RD0ZwoEBptE+TeB\r\n
        dt+c46IQY0C9z0lZyy+ukK70HXK0n+jL0hT2eASGBD/KzAdJagKjQbXTbs7IlzW0\r\n
        17j9nMFyK8pdrmHnNsG+6Gv9sDZC9WVCKur370JqAKRZeVPNPW8Ca5ZmCR/mqjYp\r\n
        zQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }
  }],
  "grantCapability": [{
    "type":"RsaSignatureCapabilityAuthorization2018",
    "publicKey": {
      "id": "did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ#ocap-grant-key-1",
      "type": "RsaVerificationKey2018",
      "owner": "did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAt1NoVOTwGly/bOAV/4mG\r\n
        J/YgrcNOVBRdO6qJz4aX0k6jFJWKZiXlVORjJOiggM+ozhaOs2g0tmEaxKh/87wV\r\n
        vf8snrr8Pw4vuyz1YCKtnrVWK1VzSCq37XGTbPNhbgWJA4IvqEy/sY/LAmQKczop\r\n
        flhN0m/3WMjr/1pxjEEYijOIMomGkw97z9k7Co4f3HjgdsYCTIIpImpSDmFyqLzU\r\n
        riSY+2mI80QzWfmOoMmdDMjcYjoB9DQv3b38QWU0nzmb5xgLo63SyuzPMI8yQ7LO\r\n
        cSv1V+6jcVnfB7SKh3jhWZM55TXX/GNvv7FLQd/FmAiWxxtyOaMcmJY6MnQUHs/B\r\n
        pQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }
  }],
  "invokeCapability": [{
    "type":"RsaSignatureCapabilityAuthorization2018",
    "publicKey":{
      "id":"did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ#ocap-invoke-key-1",
      "type":"RsaVerificationKey2018",
      "owner":"did:v1:test:nym:4jWHwNdrG9-6jd9I7K1si3kTRneNwftZV9m6rkrAfWQ",
      "publicKeyPem":"-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyLDpcQeA5XPqoTkVc70H\r\n
        DCd1IWysF1k8fNs5SWAM6hS5lsyJayWGbIOwzRWaosgKhpHzvH5Uwai5/Q0kJhmI\r\n
        WF/Qoh71wzMYwlmdO7hvBpHGMqhLcD3ysnntsAjqRXxja/f4KSW+sDsUuJWyN+Dr\r\n
        BrfYFSP60IfRGyc9+JAaOz1oEXV45AK/w0xVUOzEjC2Lg0R5BY+Jace+t7RFJmnD\r\n
        h9c+18AzLhIwXTDjojXsT1km3a8yVyjFMddGvUashAhAwPr3/Ztl//WnxwUojzFK\r\n
        9XL5estUDoCg31q7khZ9j3B6UgYP1mwfIeQmWWBt++lUtYRaKNjtVdRbIcNOYb4I\r\n
        MwIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }
  }]
}
    </pre>
  </section>

  <section>
    <h2>Legacy DID Document</h2>

    <p>
The Veres One ledger was launched in 2015, predated this specification, and as
a result has a number of legacy objects that developers should be aware of. The
typical format for these objects are shown below:
    </p>

    <pre class="example nohighlight">
{
  "@context": "https://w3id.org/identity/v1",
  "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460",
  "idp": "did:d1d1d1d1-d1d1-d1d1-d1d1-d1d1d1d1d1d1",
  "accessControl": {
    "writePermission": [{
        "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
        "type": "CryptographicKey"
    }, {
        "id": "did:d1d1d1d1-d1d1-d1d1-d1d1-d1d1d1d1d1d1",
        "type": "Identity"
    }]
  },
  "publicKey": [{
    "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
    "type": "CryptographicKey",
    "owner": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460",
    "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\nMIIBIjA...DAQAB\r\n-----END PUBLIC KEY-----\r\n",
    "@context": "https://w3id.org/identity/v1"
  }],
  "signature": {
    "type": "LinkedDataSignature2015",
    "created": "2017-07-25T17:29:49Z",
    "creator": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
    "signatureValue": "LJoxpV...daOLHbA=="
  }
}
    </pre>
  </section>

</section>

</body>
</html>
